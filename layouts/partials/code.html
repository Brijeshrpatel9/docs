{{ $lang := .lang }}
{{ if eq .lang "pulumi" }}
    {{ $lang = "cql" }}
{{ end }}

<div class="code-mode-{{ default "light" .mode }} {{ if .chrome }} code-chrome {{ end }} code-{{ .lang }}">
    {{ if .chrome }}
        {{ partial "chrome.html" . }}
    {{ end }}
    {{ if .typing }}
        <div class="typing">
            {{ highlight .code $lang (default "" .opts) }}
        </div>
    {{ else }}
        {{ highlight .code $lang (default "" .opts) }}
    {{ end }}
</div>
